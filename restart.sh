#!/bin/bash

################################################################################
# 交易系统重启脚本
# 功能：停止并重新启动交易系统
# 用法：./restart.sh [v6|v7]  默认v6
################################################################################

# 策略版本（默认v6）
STRATEGY_VERSION="${1:-v6}"

# 项目根目录
PROJECT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$PROJECT_DIR" || exit 1

################################################################################
# 颜色定义
################################################################################
GREEN='\033[0;32m'
CYAN='\033[0;36m'
NC='\033[0m' # No Color

################################################################################
# 主程序
################################################################################
main() {
    echo "========================================"
    echo "   交易系统重启脚本 (Strategy $STRATEGY_VERSION)"
    echo "========================================"
    echo
    
    # 1. 停止系统
    echo -e "${CYAN}步骤 1/2: 停止系统${NC}"
    echo "----------------------------------------"
    ./stop.sh "$STRATEGY_VERSION"
    
    echo
    echo "等待 3 秒..."
    sleep 3
    echo
    
    # 2. 启动系统
    echo -e "${CYAN}步骤 2/2: 启动系统${NC}"
    echo "----------------------------------------"
    ./start.sh "$STRATEGY_VERSION"
    
    echo
    echo "========================================"
    echo -e "${GREEN}重启完成！${NC}"
    echo "========================================"
}

# 执行主程序
main



