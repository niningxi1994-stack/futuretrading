# V7ç­–ç•¥å›æµ‹ä½¿ç”¨æŒ‡å—

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
futuretrading/
â”œâ”€â”€ config_v7.yaml                       # V7ç­–ç•¥é…ç½®ï¼ˆå®ç›˜+å›æµ‹å…±ç”¨ï¼‰
â”œâ”€â”€ run_backtest_v7.py                   # å›æµ‹è¿è¡Œè„šæœ¬
â””â”€â”€ future_v_0_1/
    â”œâ”€â”€ market/
    â”‚   â”œâ”€â”€ futu_client.py               # å®ç›˜å®¢æˆ·ç«¯ï¼ˆFutuOpenD APIï¼‰
    â”‚   â”œâ”€â”€ backtest_client.py           # å›æµ‹å®¢æˆ·ç«¯ï¼ˆCSVæ•°æ®ï¼‰
    â”‚   â””â”€â”€ backtest_engine.py           # å›æµ‹å¼•æ“
    â”œâ”€â”€ strategy/
    â”‚   â””â”€â”€ v7.py                        # V7ç­–ç•¥å®ç°
    â””â”€â”€ database/
        â”œâ”€â”€ call_csv_files_clean/        # æœŸæƒä¿¡å·æ•°æ®ï¼ˆå·²æ¸…æ´—ï¼‰
        â””â”€â”€ stock_data_csv_min/          # è‚¡ä»·åˆ†é’Ÿçº§æ•°æ®
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è¿è¡Œå®Œæ•´å›æµ‹

```bash
python3 run_backtest_v7.py --save-report backtest_result.json
```

### æµ‹è¯•è¿è¡Œï¼ˆå‰Nä¸ªæ–‡ä»¶ï¼‰

```bash
# æµ‹è¯•å‰20ä¸ªæ–‡ä»¶
python3 run_backtest_v7.py --max-files 20

# æµ‹è¯•å‰100ä¸ªæ–‡ä»¶
python3 run_backtest_v7.py --max-files 100
```

### è°ƒè¯•æ¨¡å¼

```bash
python3 run_backtest_v7.py --max-files 10 --log-level DEBUG
```

---

## âš™ï¸ é…ç½®è¯´æ˜ï¼ˆconfig_v7.yamlï¼‰

### å…³é”®å‚æ•°

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| `trade_start_time` | `12:30:00` | ä¸­åˆ12:30 PMä¹‹åï¼ˆETæ—¶é—´ï¼‰|
| `historical_premium_multiplier` | `2.0` | å†å²å‡å€¼çš„2å€ |
| `min_option_premium` | `100000` | æœ€å°æœŸæƒæº¢ä»·$100K |
| `max_daily_trades` | `5` | æ¯æ—¥æœ€å¤š5ç¬” |
| `max_single_position` | `0.40` | å•ç¬”ä»“ä½40% |
| `min_cash_ratio` | `0.01` | ä¸å…è®¸æ æ† |
| `stop_loss` | `0.10` | æ­¢æŸ-10% |
| `take_profit` | `0.20` | æ­¢ç›ˆ+20% |
| `holding_days` | `6` | æŒä»“6ä¸ªäº¤æ˜“æ—¥ |
| `blacklist_days` | `15` | é»‘åå•15å¤© |

---

## ğŸ” æ•°æ®è¯´æ˜

### æ—¶é—´å¤„ç†
- **CSVæ—¶é—´**ï¼šUTC+8ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
- **è‡ªåŠ¨è½¬æ¢**ï¼špytz â†’ çº½çº¦æ—¶é—´ï¼ˆETï¼‰
- **å¤ä»¤æ—¶/å†¬ä»¤æ—¶**ï¼šè‡ªåŠ¨å¤„ç†

### æ•°æ®æº
- **æœŸæƒä¿¡å·**ï¼š`call_csv_files_clean/` 
  - æ¯ä¸ªCSVæœ€åä¸€è¡Œæ˜¯äº¤æ˜“ä¿¡å·
  - å‰é¢çš„è¡Œæ˜¯å†å²æ•°æ®ï¼ˆç”¨äºè®¡ç®—å‡å€¼ï¼‰
  
- **è‚¡ä»·æ•°æ®**ï¼š`stock_data_csv_min/`
  - åˆ†é’Ÿçº§OHLCVæ•°æ®
  - ç”¨äºè®¡ç®—çœŸå®ç›ˆäº

---

## ğŸ“Š å›æµ‹ç»“æœç¤ºä¾‹

```
=== è´¦æˆ·æ¦‚å†µ ===
  åˆå§‹èµ„é‡‘: $100,000.00
  æœ€ç»ˆèµ„é‡‘: $151,063.21
  æ€»ç›ˆäº: +$51,063.21
  æ”¶ç›Šç‡: +51.06%

=== äº¤æ˜“ç»Ÿè®¡ ===
  æ€»ä¿¡å·æ•°: 20
  ä¹°å…¥ä¿¡å·: 3
  è¿‡æ»¤ç‡: 85.0%
  å®é™…äº¤æ˜“æ•°: 3

=== ç›ˆäºåˆ†æ ===
  å·²å®ç°ç›ˆäº: +$51,063.21
```

---

## ğŸ¯ ä½¿ç”¨æç¤º

1. **å…ˆå°è§„æ¨¡æµ‹è¯•**ï¼š`--max-files 20` 
2. **æŸ¥çœ‹è¿‡æ»¤åŸå› **ï¼š`--log-level DEBUG`
3. **å®Œæ•´å›æµ‹**ï¼šä¸åŠ  `--max-files` å‚æ•°
4. **ä¿å­˜æŠ¥å‘Š**ï¼š`--save-report filename.json`

**ç°åœ¨å¯ä»¥è¿è¡Œå®Œæ•´å›æµ‹äº†ï¼** ğŸš€

