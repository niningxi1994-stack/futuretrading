# V7ç­–ç•¥å›æµ‹ç³»ç»Ÿ - æœ€ç»ˆæ€»ç»“

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. å®Œæ•´çš„å›æµ‹ç³»ç»Ÿ
- âœ… æ—¶é—´è½¬æ¢ï¼šUTC+8 â†’ ETï¼ˆpytzè‡ªåŠ¨å¤„ç†å¤ä»¤æ—¶/å†¬ä»¤æ—¶ï¼‰
- âœ… å†å²Premiumè¿‡æ»¤ï¼šä¸¥æ ¼å¤§äº2å€å‡å€¼ï¼ˆ`>`ä¸æ˜¯`>=`ï¼‰
- âœ… é€åˆ†é’Ÿæ£€æŸ¥æŒä»“ï¼šä»entry_timeæ‰«æåˆ°å½“å‰æ—¶é—´ï¼ŒåŠæ—¶è§¦å‘æ­¢ç›ˆæ­¢æŸ
- âœ… å®šæ—¶é€€å‡ºï¼š6ä¸ªè‡ªç„¶æ—¥ï¼ˆè·³è¿‡å‘¨æœ«ï¼‰+ 15:00å¹³ä»“
- âœ… é»‘åå•æœºåˆ¶ï¼š15å¤©ä¸é‡å¤äº¤æ˜“
- âœ… çœŸå®è‚¡ä»·æ•°æ®ï¼šä»`stock_data_csv_min/`è¯»å–åˆ†é’ŸKçº¿

### 2. æ–‡ä»¶æ¶æ„
```
future_v_0_1/market/
â”œâ”€â”€ futu_client.py          # å®ç›˜å®¢æˆ·ç«¯
â”œâ”€â”€ backtest_client.py      # å›æµ‹å®¢æˆ·ç«¯ï¼ˆå®Œå…¨æ¨¡æ‹ŸFutuClientæ¥å£ï¼‰
â””â”€â”€ backtest_engine.py      # å›æµ‹å¼•æ“
```

### 3. æ•°æ®æº
- **æœŸæƒä¿¡å·**ï¼š`future_v_0_1/database/call_csv_files_clean/`
- **è‚¡ä»·æ•°æ®**ï¼š`future_v_0_1/database/stock_data_csv_min/`

---

## ğŸ“Š å›æµ‹ç»“æœï¼ˆä½¿ç”¨cleanæ•°æ®ï¼‰

```
æ€»ä¿¡å·æ•°: 6253
ä¹°å…¥ä¿¡å·: 359ç¬”
æ”¶ç›Šç‡: +22.38%
è¿‡æ»¤ç‡: 94.3%

é€€å‡ºåŸå› åˆ†å¸ƒ:
  å®šæ—¶é€€å‡º: 289ç¬” (80.5%)
  æ­¢æŸ: 55ç¬” (15.3%)
  æ­¢ç›ˆ: 15ç¬” (4.2%)

èƒœç‡: 57.5%
å¹³å‡ç›ˆåˆ©: 4.87%
å¹³å‡äºæŸ: -4.03%
```

---

## ğŸš€ è¿è¡Œå‘½ä»¤

```bash
# å®Œæ•´å›æµ‹ï¼ˆä½¿ç”¨cleanæ•°æ®ï¼‰
python3 run_backtest_v7.py --save-report backtest_result.json

# æµ‹è¯•
python3 run_backtest_v7.py --max-files 50

# è°ƒè¯•
python3 run_backtest_v7.py --max-files 20 --log-level DEBUG
```

---

## ğŸ“ å…³é”®é…ç½®ï¼ˆconfig_v7.yamlï¼‰

```yaml
trade_start_time: '12:30:00'            # ä¸­åˆ12:30 PMï¼ˆETï¼‰
historical_premium_multiplier: 2.0       # ä¸¥æ ¼å¤§äº2å€
min_option_premium: 100000              # $100Ké—¨æ§›
max_daily_trades: 5                     # æ¯æ—¥5ç¬”
max_single_position: 0.40               # å•ç¬”40%
min_cash_ratio: 0.01                    # ä¸å…è®¸æ æ†
stop_loss: 0.10                         # æ­¢æŸ-10%
take_profit: 0.20                       # æ­¢ç›ˆ+20%
holding_days: 6                         # 6ä¸ªè‡ªç„¶æ—¥
blacklist_days: 15                      # é»‘åå•15å¤©
```

---

## âš™ï¸ æ ¸å¿ƒå®ç°

### æ—¶é—´é©±åŠ¨æ¶æ„
1. æŒ‰ä¿¡å·æ—¶é—´æ’åº
2. æ¯ä¸ªä¿¡å·æ—¶é—´ç‚¹ï¼š
   - å…ˆæ‰«ææ‰€æœ‰æŒä»“çš„åˆ†é’Ÿä»·æ ¼ï¼Œæ£€æŸ¥æ­¢ç›ˆæ­¢æŸ
   - å†å¤„ç†æ–°ä¿¡å·

### æ­¢ç›ˆæ­¢æŸæ£€æŸ¥
- ä»entry_timeæ‰«æåˆ°å½“å‰æ—¶é—´çš„**æ‰€æœ‰åˆ†é’Ÿä»·æ ¼**
- é€ä¸€æ£€æŸ¥æ˜¯å¦è§¦å‘æ­¢æŸï¼ˆ<= -10%ï¼‰æˆ–æ­¢ç›ˆï¼ˆ>= +20%ï¼‰
- ä¸€æ—¦è§¦å‘ç«‹å³å¹³ä»“

### å®šæ—¶é€€å‡º
- entry_time + 6ä¸ªè‡ªç„¶æ—¥ + è·³è¿‡å‘¨æœ«
- 15:00ä¹‹åå¹³ä»“

---

## ğŸ¯ ä½¿ç”¨è¯´æ˜

V7ç­–ç•¥å›æµ‹ç³»ç»Ÿå·²å®Œæˆï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚

**å¦‚éœ€è°ƒæ•´å‚æ•°ï¼Œç›´æ¥ä¿®æ”¹ `config_v7.yaml` å³å¯ã€‚**

---

**å›æµ‹ç³»ç»Ÿäº¤ä»˜å®Œæˆï¼** âœ…

